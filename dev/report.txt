IRIS

Problème : API de pyris ne marche pas, la réquête étant trop longue https://pyris.datajazz.io/doc/
=> grequests pour effectuer des demandes en parallèle mais le site ne le voulait pas

Solution en regardant le code du serveur de l'API => données de l'IGN et fichier shp -> https://geoservices.ign.fr/documentation/diffusion/telechargement-donnees-libres.html

Différentes librairies qui s'attaquent au problème des shp
    -pyshp
    -fiona
    -OGR
    
Autres librairies intéresantes
    -scipy.spatial
    -shapely    =>  STR-tree -> Permet de trouver le polygone dans lequel se trouve un point

Cours intéressant à lire https://automating-gis-processes.github.io/CSC18/lessons/L1/Intro-Python-GIS.html

Attention aux coordonnées des données de l'IGN
=> Pas de coordonnées classiques mais bien des coordonnées de Lambert 93
=> librairie pyproj







BASES DE DONNÉES

Postes électriques RTE => Localisation, Tension et Code -> https://opendata.reseaux-energies.fr/explore/dataset/postes-electriques-rte/table/?disjunctive.fonction&disjunctive.etat&disjunctive.tension&sort=-tension

Soutirages quotidiens consolidés sur le réseau de transport d'électricité par section d'activité (2020) => Energie -> https://opendata.reseaux-energies.fr/explore/dataset/soutirages-quotidiens-consolides-sur-le-reseau-de-transport-delectricite-par-sec/table/?disjunctive.secteur_activite_economique&disjunctive.libelle_tension&sort=date_de_la_courbe

Soutirages régionaux quotidiens consolidés sur le réseau de transport d'électricité (2019 à 2020) => Energie -> https://opendata.reseaux-energies.fr/explore/dataset/soutirages-regionaux-quotidiens-consolides-rpt/table/?disjunctive.region&disjunctive.secteur_activite_economique&disjunctive.libelle_tension&sort=date_de_la_courbe

Consommation finale corrigée par secteur d'activité (2006 à 2019) => Energie RPT et RPD par mois -> https://opendata.reseaux-energies.fr/explore/dataset/conso-finale-corrigee-par-secteur/table/?sort=mois

Consommation annuelle d’électricité et gaz par IRIS et par secteur d’activité => https://opendata.agenceore.fr/explore/dataset/conso-elec-gaz-annuelle-par-secteur-dactivite-agregee-iris/table/?refine.operateur=RTE&refine.annee=2017

INSEE => 
-> géolocalisé => Christian Quest -> http://data.cquest.org/geo_sirene/v2019/2020-04/



AJOUT DES IRIS A LA BASE DE L'INSEE

En utilisant les infos de la partie IRIS, on peut créer un code permettant d'obtenir l'IRIS pour chaque établissement géolocalisé
Mais, ça prends énormément de temps
100 -> 12s
500 -> 58s
5000 -> 580s
Donc environ 0.1 seconde pour une entrée
7 000 000 entrées -> 700 000 sec soit 8 jours

Idée, découper la liste des contours d'IRIS par région pour faire un premier tri